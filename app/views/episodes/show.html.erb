<h1><%= @episode.title %></h1>
<p><strong>Season:</strong> <%= @episode.season %> â€“ <strong>Episode:</strong> <%= @episode.episode_number %></p>
<p><%= @episode.description %></p>

<hr>

<h2>Characters in this Episode</h2>
<div class="d-flex flex-wrap gap-3">
  <% @characters.each do |c| %>
    <div class="border p-2 text-center" style="width: 150px;">
      <% if c.image_url.present? %>
        <%= image_tag c.image_url, alt: c.name, width: 100, class: "mb-2" %>
      <% else %>
        <%= image_tag "placeholder.png", width: 100, class: "mb-2" %>
      <% end %>
      <p><%= link_to c.name, character_path(c) %></p>
    </div>
  <% end %>
</div>

<hr>

<h2>Quotes from This Episode</h2>
<% @characters.each do |c| %>
  <% character_quotes = c.quotes.where(episode: @episode) %>
  <% if character_quotes.any? %>
    <h4><%= c.name %></h4>
    <ul>
      <% character_quotes.each do |q| %>
        <li>"<%= q.text %>"</li>
      <% end %>
    </ul>
  <% end %>
<% end %>

<hr>

<p><%= link_to "Back to Episodes", episodes_path, class: "btn btn-secondary mt-3" %></p>
